name: Build production

on:
  workflow_dispatch:
    inputs:
      # SelectBox : Deploy type for tags
      deploy_type:
        type: choice
        required: true
        description: "ë°°í¬íƒ€ì…: myrealtrip(ì •ê¸°), hotfix(í•«í”½ìŠ¤)"
        options:
          - myrealtrip
          - hotfix
      # CheckBox : Is allowed to change version after deploy
      version_change:
        type: boolean
        description: "ë²„ì „ë³€ê²½ í¬í•¨(ì„œë²„ë°°í¬ í™•ì¸ í•„ìˆ˜)"
        default: true
        
jobs:
  build:
    env:
      deploy_target: 'production'
      
    runs-on: self-hosted
    
    steps:
      - name: Test
        run: |
          if [ github.event.inputs.version_change == 'true' ] then;
            echo <!here> ğŸŒŸí”„ë¡ íŠ¸ì—”ë“œ `${{ env.deploy_target }}` ë°°í¬ê°€ ì™„ë£Œ ë˜ì—ˆìŠµë‹ˆë‹¤.ğŸ¥³\n\n- sha -> ${{ '7d8cc70c15c2b1d85525f0e8408001adf22f526e' }}\nâœ…ë²„ì „ì´ ë³€ê²½ë˜ì—ˆìœ¼ë‹ˆ í™•ì¸í•´ì£¼ì„¸ìš”.
          else
            echo <!here> ğŸŒŸí”„ë¡ íŠ¸ì—”ë“œ `${{ env.deploy_target }}` ë°°í¬ê°€ ì™„ë£Œ ë˜ì—ˆìŠµë‹ˆë‹¤.ğŸ¥³\n\n- sha -> ${{ '7d8cc70c15c2b1d85525f0e8408001adf22f526e' }}\nâš Frontend ë²„ì „ ë³€ê²½ì„ ì§„í–‰í•´ì£¼ì„¸ìš”.
            
